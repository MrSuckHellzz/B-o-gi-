<%- include('partials/header') %>
<main>
    <a href="/category" class="category-return"><p>&#8592; Quay v·ªÅ trang Nh√≥m H√†ng</p></a>
    <h1 class="main-title text-center m-3 color"><strong>T√™n nh√≥m h√†ng ƒë∆∞·ª£c ch·ªçn</strong></h1>

    <div class="product-form-container">
        <form class="d-flex me-3" method="GET" action="/search">
            <input class="search-app-input" type="search" name="q" placeholder="T√¨m ki·∫øm" aria-label="T√¨m Ki·∫øm" required>
        </form>

        <h3 id="form-product-button">&#x2795; Th√™m h√†ng</h3>
    </div>
    <form id="product-form" method="POST" action="/product/<%= categoryId %>">
        <label for="productName" class="form-label me-2">T√™n m·∫∑t h√†ng (quy c√°ch):</label>
        <input type="text" class="form-control me-2 border-black" id="productName" name="productName" required>
        <label for="productWeight" class="form-label me-2">Tr·ªçng l∆∞·ª£ng:</label>
        <input type="text" class="form-control me-2 border-black" id="productWeight" name="productWeight">
        <label for="productLength" class="form-label me-2">ƒê·ªô d√†i:</label>
        <input type="text" class="form-control me-2 border-black" id="productLength" name="productLength">
        <label for="productWidth" class="form-label me-2">ƒê·ªô r·ªông:</label>
        <input type="text" class="form-control me-2 border-black" id="productWidth" name="productWidth">
        <label for="productThick" class="form-label me-2">ƒê·ªô d√†y:</label>
        <input type="text" class="form-control me-2 border-black" id="productThick" name="productThick">
        <label for="priceIn" class="form-label me-2">Gi√° nh·∫≠p:</label>
        <input type="text" class="form-control me-2 border-black" id="priceIn" name="priceIn">
        <label for="priceOut" class="form-label me-2">Gi√° b√°n:</label>
        <input type="text" class="form-control me-2 border-black" id="priceOut" name="priceOut">
        <label for="pricePer" class="form-label me-2">ƒê∆°n gi√°:</label>
        <input type="text" class="form-control me-2 border-black" id="pricePer" name="pricePer">
        <button type="submit" class="submit-button full-width">Th√™m</button>
    </form>
    <hr>
    <div class="category-products">
        <table class="product-table">
            <thead>
                <tr>
                    <td>T√™n h√†ng (quy c√°ch)</td>
                    <td>Tr·ªçng l∆∞·ª£ng</td>
                    <td>ƒê·ªô d√†i</td>
                    <td>ƒê·ªô r·ªông</td>
                    <td>ƒê·ªô d√†y</td>
                    <td>Gi√° nh·∫≠p</td>
                    <td>Gi√° b√°n</td>
                    <td>ƒê∆°n gi√°</td>
                    <td style="
                        background-color: rgb(255, 0, 0); 
                        color: rgb(255, 255, 255);
                        ">
                    X√≥a
                    </td>
                </tr>
            </thead>
            <tbody>
                <% products.forEach(product => {%>
                    <tr>
                        <td><%= product.name %></td>
                        <td><%= product.weight %></td>
                        <td><%= product.length %></td>
                        <td><%= product.width %></td>
                        <td><%= product.thickness %></td>
                        <td><%= product.priceIn %></td>
                        <td><%= product.priceOut %></td>
                        <td><%= product.pricePer %></td>
                        <td class="product-remove">
                            <form method = "POST" action="/product/delete/<%= categoryId %>/<%= product._id %>" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a m·∫∑t h√†ng n√†y kh√¥ng?');">
                                <button type="submit" class="product-delete-button">üóëÔ∏è</button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</main>

<script>
    //Toggle product form visibility
    let productButton = document.getElementById('form-product-button');
    let productForm = document.getElementById('product-form');
    
    productButton.addEventListener('click', () => {
        if (productForm.classList.contains('visible') === false) {
            productForm.classList.toggle('visible');
            productButton.innerHTML ="&#x2796; ·∫®n bi·ªÉu m·∫´u";
        } else {
            productForm.classList.toggle('visible');
            productButton.innerHTML ="&#x2795; Th√™m m·∫∑t h√†ng";
        }
    });
</script>
<%- include('partials/footer') %>